{
  "comments": [
    {
      "key": {
        "uuid": "140b62bd_72350af7",
        "filename": "logging/rtc_event_log/encoder/rtc_event_log_encoder_legacy.cc",
        "patchSetId": 14
      },
      "lineNbr": 119,
      "author": {
        "id": 5659
      },
      "writtenOn": "2018-01-11T23:23:27Z",
      "side": 1,
      "message": "Can you please leave a comment explaining why these are \"config\" events and not normal events?\n\nAlso, can we just have one enum for events and then have the log method special-case the config events rather than having the caller know the distinction?  If we move events from one type to another it will be a pain to rename it in a bunch of places.",
      "range": {
        "startLine": 119,
        "startChar": 54,
        "endLine": 119,
        "endChar": 0
      },
      "revId": "a6d838dd027dedabf9d6dfc546d18175e93ca4da",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a8083e6b_83f90df0",
        "filename": "logging/rtc_event_log/events/rtc_event_ice_candidate_pair_config.cc",
        "patchSetId": 14
      },
      "lineNbr": 53,
      "author": {
        "id": 5150
      },
      "writtenOn": "2018-01-09T20:06:24Z",
      "side": 1,
      "message": "I\u0027m not sure about this. From the point of the log, config events are the ones that are stored perpetually in memory, even when not logging. If you really want this behavior, then we need a limit on how many ICE candidate pairs there is expected to be in a call.",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 14
      },
      "revId": "a6d838dd027dedabf9d6dfc546d18175e93ca4da",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a8ca695f_6cca5f80",
        "filename": "logging/rtc_event_log/events/rtc_event_ice_candidate_pair_config.cc",
        "patchSetId": 14
      },
      "lineNbr": 53,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-01-09T23:01:49Z",
      "side": 1,
      "message": "The rotating log only stores the last few minutes of non-config events, correct? Then, I don\u0027t see how we can get around having at least *some* of these be config events. It\u0027s not very useful to know \"candidate pair X sent a check at time Y\" if you don\u0027t know any of the properties of that candidate pair, because the \"selected\" event was cut off.\n\nWhen you say \"we need a limit,\" how much memory would be \"too much\" for you?",
      "parentUuid": "a8083e6b_83f90df0",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 14
      },
      "revId": "a6d838dd027dedabf9d6dfc546d18175e93ca4da",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c896b8c3_e3fc36ee",
        "filename": "logging/rtc_event_log/events/rtc_event_ice_candidate_pair_config.cc",
        "patchSetId": 14
      },
      "lineNbr": 53,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-01-10T00:06:23Z",
      "side": 1,
      "message": "Please correct me if I am wrong. It seems both config and non-config events are logged to the memory in the current implementation in RtcEventLogImpl::LogToMemory. The difference is the capacity of events that can be logged, 1k config vs 10k non-config. I have a ballpark estimate of ~50 non-config ICE events (some calls can generate around 20 to 30 candidate pairs). Does that squeeze the room of other config events?",
      "parentUuid": "a8ca695f_6cca5f80",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 14
      },
      "revId": "a6d838dd027dedabf9d6dfc546d18175e93ca4da",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b57c2a2f_e4b13718",
        "filename": "logging/rtc_event_log/events/rtc_event_ice_candidate_pair_config.cc",
        "patchSetId": 14
      },
      "lineNbr": 53,
      "author": {
        "id": 5659
      },
      "writtenOn": "2018-01-11T23:23:27Z",
      "side": 1,
      "message": "Candidate pairs shouldn\u0027t take up much memory.  And realistically, you\u0027ll never see more than a few hundred in a call.  Is that too many?  Are we setting over a few KB of memory?",
      "parentUuid": "c896b8c3_e3fc36ee",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 14
      },
      "revId": "a6d838dd027dedabf9d6dfc546d18175e93ca4da",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1ed16d94_b6047e89",
        "filename": "logging/rtc_event_log/events/rtc_event_ice_candidate_pair_config.h",
        "patchSetId": 14
      },
      "lineNbr": 73,
      "author": {
        "id": 5053
      },
      "writtenOn": "2018-01-09T23:01:49Z",
      "side": 1,
      "message": "It\u0027s actually not possible to know the remote relay protocol, since it\u0027s not part of the candidate signaling; even if the remote endpoint connected to the TURN server over TCP, the candidate SDP string will only say \"UDP\".\n\nSo, the only way to know the remote relay protocol would be to do some post-processing on the logs from both sides.",
      "revId": "a6d838dd027dedabf9d6dfc546d18175e93ca4da",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "233ef288_95608be7",
        "filename": "logging/rtc_event_log/events/rtc_event_ice_candidate_pair_config.h",
        "patchSetId": 14
      },
      "lineNbr": 73,
      "author": {
        "id": 5659
      },
      "writtenOn": "2018-01-11T23:23:27Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "1ed16d94_b6047e89",
      "revId": "a6d838dd027dedabf9d6dfc546d18175e93ca4da",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "32a091dc_0f421506",
        "filename": "logging/rtc_event_log/rtc_event_log_parser.h",
        "patchSetId": 14
      },
      "lineNbr": 75,
      "author": {
        "id": 5150
      },
      "writtenOn": "2018-01-09T20:06:24Z",
      "side": 1,
      "message": "We\u0027re trying to avoid references to the proto in the parser interface.  In general, future development will be easier if we decouple the file format from the C++ representation. This argument is maybe less relevant since it is just a few unions where the representation is unlikely to change. However, the new format is currently (this might change) using the rtclog2 namespace.\n\nWould it be possible to use the same enum types that you used as input when constructing the IceCandidatePairConfig?",
      "range": {
        "startLine": 75,
        "startChar": 4,
        "endLine": 75,
        "endChar": 10
      },
      "revId": "a6d838dd027dedabf9d6dfc546d18175e93ca4da",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dfe75857_010e2e91",
        "filename": "logging/rtc_event_log/rtc_event_log_parser.h",
        "patchSetId": 14
      },
      "lineNbr": 88,
      "author": {
        "id": 5150
      },
      "writtenOn": "2018-01-09T20:06:24Z",
      "side": 1,
      "message": "Same here.",
      "range": {
        "startLine": 88,
        "startChar": 4,
        "endLine": 88,
        "endChar": 10
      },
      "revId": "a6d838dd027dedabf9d6dfc546d18175e93ca4da",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "32513a29_1478b3cf",
        "filename": "rtc_tools/event_log_visualizer/analyzer.cc",
        "patchSetId": 14
      },
      "lineNbr": 2132,
      "author": {
        "id": 5150
      },
      "writtenOn": "2018-01-09T20:06:24Z",
      "side": 1,
      "message": "When this happen, does it impact only the newly added events, or does it prevent visualization of the existing graphs too?",
      "range": {
        "startLine": 2132,
        "startChar": 36,
        "endLine": 2132,
        "endChar": 60
      },
      "revId": "a6d838dd027dedabf9d6dfc546d18175e93ca4da",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7e2eb04f_70c4955b",
        "filename": "rtc_tools/event_log_visualizer/analyzer.cc",
        "patchSetId": 14
      },
      "lineNbr": 2132,
      "author": {
        "id": 5887
      },
      "writtenOn": "2018-01-10T00:06:23Z",
      "side": 1,
      "message": "It does not fail the existing graphs because the ICE plots are appended at the end by the local LogAnalyzer. The issue is caused by the failure of generating a color palette with enough colors for a large number of time series.",
      "parentUuid": "32513a29_1478b3cf",
      "range": {
        "startLine": 2132,
        "startChar": 36,
        "endLine": 2132,
        "endChar": 60
      },
      "revId": "a6d838dd027dedabf9d6dfc546d18175e93ca4da",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767",
      "unresolved": true
    }
  ]
}